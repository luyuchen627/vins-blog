(window.webpackJsonp=window.webpackJsonp||[]).push([[95],{225:function(t,s,e){"use strict";e.r(s);var n=e(0),a=Object(n.a)({},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),e("p",[t._v("该系列为 "),e("a",{attrs:{href:"http://hcysun.me/vue-design/art/",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue技术揭幕"),e("OutboundLink")],1),t._v(" 的简化版本")]),t._v(" "),e("p",[e("router-link",{attrs:{to:"./#实例化"}},[t._v("实例化")]),t._v(" -> "),e("a",{attrs:{href:"./%E6%A0%B8%E5%BF%83%E6%89%A9%E5%B1%95"}},[t._v("核心扩展")]),t._v(" -> "),e("a",{attrs:{href:"./%E5%B9%B3%E5%8F%B0%E5%8C%96"}},[t._v("平台化-运行时")]),t._v(" -> "),e("a",{attrs:{href:"./%E5%AE%8C%E6%95%B4%E7%89%88"}},[t._v("完整版")])],1),t._v(" "),t._m(1),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),t._m(4),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),t._m(8),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),t._v(" "),t._m(13),t._v(" "),e("ol",[t._m(14),t._v(" "),e("li",[e("p",[t._v("将 "),e("router-link",{attrs:{to:"./#选项合并"}},[t._v("选项合并")]),t._v(" 的结果添加到新属性 "),e("strong",[t._v("$options")])],1)]),t._v(" "),e("li",[t._m(15),t._v(" "),e("ol",[t._m(16),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),e("li",[e("p",[t._v("调用 "),e("strong",[t._v("initRender(vm)")]),t._v(" 添加渲染虚拟DOM所使用的一些属性，"),e("router-link",{attrs:{to:"./#渲染虚拟节点"}},[t._v("渲染虚拟节点")])],1)]),t._v(" "),t._m(19),t._v(" "),t._m(20),t._v(" "),e("li",[e("p",[t._v("调用 "),e("strong",[t._v("initState(vm)")]),t._v(" "),e("router-link",{attrs:{to:"./#初始化state"}},[t._v("初始化state")]),t._v("，包括 "),e("strong",[t._v("props")]),t._v("，"),e("strong",[t._v("methods")]),t._v("，"),e("strong",[t._v("data")]),t._v("，"),e("strong",[t._v("computed")]),t._v("，"),e("strong",[t._v("watch")])],1)]),t._v(" "),t._m(21),t._v(" "),t._m(22),t._v(" "),t._m(23)])])]),t._v(" "),t._m(24),t._v(" "),t._m(25),t._v(" "),t._m(26),t._v(" "),t._m(27),t._v(" "),t._m(28),t._v(" "),t._m(29),t._v(" "),t._m(30),t._v(" "),t._m(31),t._v(" "),t._m(32),t._v(" "),t._m(33),t._v(" "),t._m(34),t._v(" "),e("p",[t._v("将 Vue，及其原型链上的option属性和实例化vue的选项以及该vue实例vm，进行合并")]),t._v(" "),t._m(35),t._m(36),t._v(" "),t._m(37),t._v(" "),t._m(38),t._v(" "),e("p",[t._v("默认策略")]),t._v(" "),t._m(39),t._m(40),t._v(" "),e("ul",[t._m(41),t._v(" "),t._m(42),t._v(" "),t._m(43),t._v(" "),t._m(44),t._v(" "),t._m(45),t._v(" "),e("li",[e("p",[t._v("最后调用 "),e("router-link",{attrs:{to:"./#observe"}},[t._v("observe")]),t._v(" 函数开启响应式之路")],1)])]),t._v(" "),t._m(46),t._v(" "),e("p",[t._v("vue的diff算法用来解析vue实例为虚拟Dom")]),t._v(" "),t._m(47),t._v(" "),e("p",[e("a",{attrs:{href:"https://segmentfault.com/a/1190000008782928",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue的diff算法"),e("OutboundLink")],1)]),t._v(" "),t._m(48),t._v(" "),t._m(49),t._v(" "),e("p",[t._v("生命周期函数可以定义为一个函数数组")]),t._v(" "),t._m(50),t._v(" "),t._m(51),t._v(" "),t._m(52),t._v(" "),t._m(53),t._v(" "),t._m(54),t._v(" "),t._m(55),t._v(" "),t._m(56),t._v(" "),t._m(57),t._v(" "),t._m(58),t._m(59),t._v(" "),e("p",[t._v("因为props 的初始化再data的前面，所以data可以访问props，但是data中声明的局部变量不随着props更新而更新")])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h1",{attrs:{id:"vue组件的解析过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vue组件的解析过程","aria-hidden":"true"}},[this._v("#")]),this._v(" vue组件的解析过程")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"实例化"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#实例化","aria-hidden":"true"}},[this._v("#")]),this._v(" 实例化")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("通过注入Vue的方式扩展 "),s("strong",[this._v("Vue.prototype")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ol",[e("li",[e("p",[t._v("调用 "),e("strong",[t._v("initMixin(Vue)")]),t._v(" 添加 "),e("a",{attrs:{href:"./_init%E6%96%B9%E6%B3%95"}},[t._v("_init")])])]),t._v(" "),e("li",[e("p",[t._v("调用 "),e("strong",[t._v("stateMixin(Vue)")])]),t._v(" "),e("ul",[e("li",[t._v("代理只读属性 "),e("strong",[t._v("$data")]),t._v(" 到 "),e("strong",[t._v("this._data")])]),t._v(" "),e("li",[t._v("代理只读属性  "),e("strong",[t._v("$props")]),t._v(" 到 "),e("strong",[t._v("this_props")])]),t._v(" "),e("li",[t._v("添加 "),e("strong",[t._v("$set")]),t._v("，"),e("strong",[t._v("$delete")]),t._v(" 和 "),e("strong",[t._v("$watch")]),t._v(" 函数")])])]),t._v(" "),e("li",[e("p",[t._v("调用 "),e("strong",[t._v("eventsMixin(Vue)")]),t._v("，添加 "),e("strong",[t._v("&on")]),t._v("，"),e("strong",[t._v("&once")]),t._v("，"),e("strong",[t._v("&off")]),t._v("，"),e("strong",[t._v("&emit")]),t._v(" 方法")])]),t._v(" "),e("li",[e("p",[t._v("调用 "),e("strong",[t._v("lifecycleMixin(Vue)")]),t._v(" 添加 "),e("strong",[t._v("_update")]),t._v("，"),e("strong",[t._v("$forceUpdate")]),t._v("，"),e("strong",[t._v("$destroy")]),t._v(" 方法")])]),t._v(" "),e("li",[e("p",[t._v("调用 "),e("strong",[t._v("renderMixin(Vue)")]),t._v(" 添加 "),e("strong",[t._v("$nextTick")]),t._v("，"),e("strong",[t._v("_render")]),t._v(" 以及和渲染相关的函数")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"核心扩展"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#核心扩展","aria-hidden":"true"}},[this._v("#")]),this._v(" 核心扩展")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ol",[e("li",[e("p",[t._v("调用 "),e("strong",[t._v("initGlobalAPI(Vue)")]),t._v(" 添加全局函数")]),t._v(" "),e("ol",[e("li",[e("p",[t._v("在类上代理只读属性 "),e("strong",[t._v("config")]),t._v(" 到默认的config")])]),t._v(" "),e("li",[e("p",[t._v("在类上添加 "),e("strong",[t._v("util")]),t._v(" 属性")])])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("Vue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\twarn"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\textend"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tmergeOptions"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tdefineReactive\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("ol",{attrs:{start:"3"}},[e("li",[t._v("在类上添加 "),e("strong",[t._v("set")]),t._v(" ，"),e("strong",[t._v("delete")]),t._v(" ，"),e("strong",[t._v("nextTick")]),t._v(" 以及 "),e("strong",[t._v("options")]),t._v("，options 属性来自 "),e("strong",[t._v("ASSET_TYPES")])])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 默认都是空对象，会在不同的平台相应的扩展")]),t._v("\nVue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tcomponents"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tdirectives"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tfilters"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t_base"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Vue\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("ol",{attrs:{start:"4"}},[e("li",[e("p",[t._v("扩展 "),e("strong",[t._v("options.components")]),t._v("， 添加非核心组件 "),e("strong",[t._v("KeepAlive")])])]),t._v(" "),e("li",[e("p",[t._v("调用 "),e("strong",[t._v("initUse(Vue)")]),t._v("，给 "),e("strong",[t._v("Vue")]),t._v(" 添加全局 "),e("strong",[t._v("use")]),t._v(" 方法，加载插件")])]),t._v(" "),e("li",[e("p",[t._v("调用 "),e("strong",[t._v("initMixin(Vue)")]),t._v("，给 "),e("strong",[t._v("Vue")]),t._v(" 添加全局 "),e("strong",[t._v("mixin")]),t._v(" 方法，注入混合")])]),t._v(" "),e("li",[e("p",[t._v("调用 "),e("strong",[t._v("initExtend(Vue)")]),t._v("，给 "),e("strong",[t._v("Vue")]),t._v(" 添加全局 "),e("strong",[t._v("extend")]),t._v(" 方法，继承")])]),t._v(" "),e("li",[e("p",[t._v("调用 "),e("strong",[t._v("initAssetRegisters(Vue)")]),t._v("，添加全局的 "),e("strong",[t._v("component")]),t._v("，"),e("strong",[t._v("directive")]),t._v("，"),e("strong",[t._v("filter")]),t._v("，扩展")])])])]),t._v(" "),e("li",[e("p",[t._v("添加 "),e("strong",[t._v("$isServer")]),t._v(" 是否是服务端渲染的标识")])]),t._v(" "),e("li",[e("p",[t._v("添加 "),e("strong",[t._v("$ssrContext")]),t._v(" 服务端渲染的 Vnode")])]),t._v(" "),e("li",[e("p",[t._v("在类上添加 "),e("strong",[t._v("FunctionalRenderContext")]),t._v(" 组件渲染方法")])]),t._v(" "),e("li",[e("p",[t._v("在类上添加版本号 "),e("strong",[t._v("version")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"平台化（web）"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#平台化（web）","aria-hidden":"true"}},[this._v("#")]),this._v(" 平台化（web）")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ol",[e("li",[e("p",[t._v("添加平台化的 "),e("strong",[t._v("config")]),t._v(" 属性")])]),t._v(" "),e("li",[e("p",[t._v("扩展 "),e("strong",[t._v("options.components")]),t._v(" 和 "),e("strong",[t._v("options.directives")]),t._v("，扩展后的结构")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("Vue"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("options "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tcomponents"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tKeepAlive"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\tTransition"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\tTransitionGroup\n\t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tdirectives"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tmodel"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\tshow\n\t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\tfilters"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Object"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),e("span",{pre:!0,attrs:{class:"token function"}},[t._v("create")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t_base"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Vue\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",{attrs:{start:"3"}},[s("li",[s("p",[this._v("添加 "),s("strong",[s("code",[this._v("__patch__")])]),this._v(" 方法")])]),this._v(" "),s("li",[s("p",[this._v("添加 "),s("strong",[this._v("$mount")]),this._v(" 方法")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"完整版"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#完整版","aria-hidden":"true"}},[this._v("#")]),this._v(" 完整版")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[s("p",[this._v("重写 "),s("strong",[this._v("Vue.prototype.$mount")])])]),this._v(" "),s("li",[s("p",[this._v("添加了 "),s("strong",[this._v("Vue.compile")]),this._v(" 全局API")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"重要方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重要方法","aria-hidden":"true"}},[this._v("#")]),this._v(" 重要方法")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"init方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#init方法","aria-hidden":"true"}},[this._v("#")]),this._v(" _init方法")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("添加 "),s("strong",[this._v("_isVue")]),this._v(" 标识，防止被相应系统观测")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("执行一系列 "),s("em",[this._v("init*")]),this._v(" 方法")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("调用 "),s("strong",[this._v("initProxy(vm)")]),this._v(" 添加拦截器 "),s("strong",[this._v("vm._renderProxy")]),this._v("，更好的错误提示")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("li",[e("p",[t._v("添加 "),e("strong",[t._v("vm._self = vm")]),t._v("，调用 "),e("strong",[t._v("initLifecycle(vm)")])]),t._v(" "),e("ul",[e("li",[e("p",[t._v("把当前实例添加到父实例的 "),e("strong",[t._v("$children")]),t._v(" 数组里")])]),t._v(" "),e("li",[e("p",[t._v("添加 "),e("strong",[t._v("$parent")]),t._v(" 指向父实例")])]),t._v(" "),e("li",[e("p",[t._v("添加 "),e("strong",[t._v("$root")]),t._v(" 指向根元素")])]),t._v(" "),e("li",[e("p",[t._v("添加一些属性")])])]),t._v(" "),e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[t._v("vm"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$children "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nvm"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$refs "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nvm"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_watcher "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\nvm"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_inactive "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("null")]),t._v("\nvm"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_directInactive "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\nvm"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_isMounted "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\nvm"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_isDestroyed "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\nvm"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("_isBeingDestroyed "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n")])])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("调用 "),s("strong",[this._v("initEvents(vm)")]),this._v(" 更新组件的事件")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("调用 "),s("strong",[this._v("callHook(vm, 'beforeCreate')")]),this._v("，触发 "),s("strong",[this._v("beforeCreate")]),this._v(" 函数")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("li",[e("p",[t._v("调用 "),e("strong",[t._v("initInjections(vm)")]),t._v(" 初始化 "),e("strong",[t._v("inject")]),t._v("，遍历所有祖先的**_provided**，合并，使用 "),e("strong",[t._v("defineReactive")]),t._v(" 拦截，并和"),e("strong",[t._v("data")]),t._v(" 一样代理到"),e("strong",[t._v("vm")]),t._v("，注意，注入的数据不一定是响应式的")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("调用 "),s("strong",[this._v("initProvide(vm)")]),this._v(" 初始化 "),s("strong",[this._v("provide")]),this._v("，添加 "),s("strong",[this._v("vm._provided")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("调用 "),s("strong",[this._v("callHook(vm, 'created')")]),this._v(" ，触发 "),s("strong",[this._v("created")]),this._v(" 函数")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("调用 "),s("strong",[this._v("$mount()")]),this._v(" 方法装载到dom中")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"definereactive方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#definereactive方法","aria-hidden":"true"}},[this._v("#")]),this._v(" defineReactive方法")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在 "),s("strong",[this._v("getter")]),this._v(" 访问器中收集依赖，同时收集在该对象的 "),s("strong",[s("strong",[this._v("ob")])]),this._v(" 中，在 "),s("strong",[this._v("setter")]),this._v(" 访问器中通知依赖更新")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"observe"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#observe","aria-hidden":"true"}},[this._v("#")]),this._v(" observe")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[e("strong",[t._v("observe")]),t._v(" 函数用来把数据变为响应数据，该函数会为数据添加 "),e("strong",[e("strong",[t._v("ob")])]),t._v(" 属性，用来保存响应依赖，同时通过闭包引用一个 "),e("strong",[t._v("dep")]),t._v(" 对象，通过 "),e("strong",[t._v("defineReactive")]),t._v(" 方法定义数据的访问器，把数据变为响应式，递归 "),e("strong",[t._v("observe")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"mount"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mount","aria-hidden":"true"}},[this._v("#")]),this._v(" $mount")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("$mount")]),this._v(" 函数要做的核心事情就是编译模板 "),s("strong",[this._v("template")]),this._v(" 字符串为渲染函数，并将渲染函数赋值给 "),s("strong",[this._v("vm.$options.render")]),this._v(" 选项，这个选项将会在真正挂载组件的 mountComponent 函数中，渲染函数的顺序是：render > template > el")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("p",[t._v("通过内部的 "),e("strong",[t._v("_render")]),t._v(" 渲染虚拟dom，然后 "),e("strong",[t._v("_update")]),t._v(" 把虚拟节点添加到dom中，中间经历着 "),e("strong",[t._v("依赖收集")]),t._v("，"),e("strong",[t._v("patch")]),t._v(" 补丁，渲染函数的观察(添加 "),e("strong",[t._v("beforeUpdate")]),t._v(")，异步队列更新")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"nexttick"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#nexttick","aria-hidden":"true"}},[this._v("#")]),this._v(" $nextTick")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("$nextTick")]),this._v(" 的任务触发优先级：Promise.resolve > setImmediate > MessageChannel > setTimeout")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"核心概念"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#核心概念","aria-hidden":"true"}},[this._v("#")]),this._v(" 核心概念")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"选项合并"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#选项合并","aria-hidden":"true"}},[this._v("#")]),this._v(" 选项合并")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[this._v("vm.$options = mergeOptions(\n    resolveConstructorOptions(vm.constructor),  // 递归调用 mergeOptions\n    options || {},\n    vm  // 如果有vm，则为通过 new 创建的实例，否则认为子组件(vue.extend)\n)\n")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ol",[e("li",[e("p",[t._v("检查选项的规范性")]),t._v(" "),e("p",[t._v("检测components的命名，规范化 "),e("strong",[t._v("props")]),t._v("，"),e("strong",[t._v("inject")]),t._v("，"),e("strong",[t._v("directives")]),t._v("，均格式化为对象，"),e("strong",[t._v("inject")]),t._v(" 格式化为含有一个 "),e("strong",[t._v("from")]),t._v(" 属性的对象")])]),t._v(" "),e("li",[e("p",[t._v("合并")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("合并策略 "),s("strong",[this._v("Vue.config.optionMergeStrategies")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("ol",[e("li",[e("p",[e("strong",[t._v("el")]),t._v(" 和 "),e("strong",[t._v("propsData")]),t._v(" 使用默认策略")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("data")]),t._v(" 合并为一个函数，"),e("strong",[t._v("参数为当前实例")]),t._v("，在初始化的时候被调用，调用返回合并后的对象")])]),t._v(" "),e("li",[e("p",[t._v("生命周期合并为一个函数数组，父元素在前，子元素在后的顺序")])]),t._v(" "),e("li",[e("p",[t._v("资源("),e("strong",[t._v("directives")]),t._v("、"),e("strong",[t._v("filters")]),t._v(" 和 "),e("strong",[t._v("components")]),t._v(")的合并，是以原型的方式("),e("strong",[t._v("Object.create(parentVal || null)")]),t._v(")合并， **"),e("code",[t._v("__proto__")]),t._v("**指向父元素选项")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("watch")]),t._v(" 选项的合并，父元素有相同的选项时，合并为数组，否则返回 parent || child")])]),t._v(" "),e("li",[e("p",[t._v("props、methods、inject、computed 的合并，父子合并，有相同的选项，子覆盖父")])]),t._v(" "),e("li",[e("p",[e("strong",[t._v("provide")]),t._v(" 的合并和 "),e("strong",[t._v("data")]),t._v(" 一样")])])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-js extra-class"},[e("pre",{pre:!0,attrs:{class:"language-js"}},[e("code",[e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("defaultStrat")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parentVal"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" any"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" childVal"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" any"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" any "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" childVal "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" undefined\n\t\t"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" parentVal\n\t\t"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" childVal\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"初始化state"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#初始化state","aria-hidden":"true"}},[this._v("#")]),this._v(" 初始化state")])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("根据 vm.$options.data 选项获取真正想要的数据（注意：此时 vm.$options.data 是函数）")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("校验得到的数据是否是一个纯对象")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("检查数据对象 data 上的键是否与 props 对象上的键冲突")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("检查 methods 对象上的键是否与 data 对象上的键冲突")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("li",[s("p",[this._v("在 Vue 实例对象上添加代理访问数据对象的同名属性， 使用 "),s("strong",[this._v("Object.defineProperty")]),this._v(" 代理 "),s("strong",[this._v("_data")]),this._v(" 到 "),s("strong",[this._v("vm")]),this._v(", 因此 vm.a == vm._data.a")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"vnode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#vnode","aria-hidden":"true"}},[this._v("#")]),this._v(" Vnode")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[s("p",[this._v("匹配字符串中的标签和属性，使用栈保存dom的父子关系")])]),this._v(" "),s("li",[s("p",[this._v("通过注入的钩子函数，处理响应的标签和属性")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"隐藏的小功能"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#隐藏的小功能","aria-hidden":"true"}},[this._v("#")]),this._v(" 隐藏的小功能")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"生命周期函数数组"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生命周期函数数组","aria-hidden":"true"}},[this._v("#")]),this._v(" 生命周期函数数组")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"抽象组件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#抽象组件","aria-hidden":"true"}},[this._v("#")]),this._v(" 抽象组件")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在 "),s("strong",[this._v("option")]),this._v(" 上添加 "),s("strong",[this._v("abstract: true")]),this._v("，抽象组件的特点就是它们不渲染真实DOM，而且不会出现在父子关系的路径")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("例如 "),s("strong",[this._v("keep-alive")]),this._v(" 和 "),s("strong",[this._v("transition")]),this._v(" 就是抽象组件")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"指定-parent"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#指定-parent","aria-hidden":"true"}},[this._v("#")]),this._v(" 指定 parent")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("在定义子组件的时候可以指定 "),s("strong",[this._v("parent")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"createelement"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#createelement","aria-hidden":"true"}},[this._v("#")]),this._v(" $createElement")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("可是使用 "),s("strong",[this._v("$createElement")]),this._v(" 创建元素")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"生命周期钩子的事件侦听器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#生命周期钩子的事件侦听器","aria-hidden":"true"}},[this._v("#")]),this._v(" 生命周期钩子的事件侦听器")])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"language-html extra-class"},[e("pre",{pre:!0,attrs:{class:"language-html"}},[e("code",[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token tag"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("<")]),t._v("child")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("@hook:")]),t._v("beforeCreate")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("handleChildBeforeCreate"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("@hook:")]),t._v("created")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("handleChildCreated"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("@hook:")]),t._v("mounted")]),e("span",{pre:!0,attrs:{class:"token attr-value"}},[e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')]),t._v("handleChildMounted"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token attr-name"}},[e("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("@hook:")]),t._v("生命周期钩子")]),t._v("\n "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("/>")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"props-初始化-data"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#props-初始化-data","aria-hidden":"true"}},[this._v("#")]),this._v(" props 初始化 data")])}],!1,null,null,null);s.default=a.exports}}]);