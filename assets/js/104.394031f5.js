(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{215:function(e,o,t){"use strict";t.r(o);var a=t(0),i=Object(a.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var e=this,o=e.$createElement,t=e._self._c||o;return t("div",{staticClass:"content"},[t("h1",{attrs:{id:"http-缓存-cookie篇"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#http-缓存-cookie篇","aria-hidden":"true"}},[e._v("#")]),e._v(" http 缓存-cookie篇")]),e._v(" "),t("h2",{attrs:{id:"why-cookie？"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#why-cookie？","aria-hidden":"true"}},[e._v("#")]),e._v(" why cookie？")]),e._v(" "),t("p",[e._v("问题：身份验证\n在客户端进行http请求时，服务器无法知道两个请求是否来自于同一个浏览器。最简单的办法就是在请求的页面中插入一个 token，然后在下次请求时将这个 token 返回至服务器。这需要在页面的 form 表单中插入一个包含 token 的隐藏域，或者将 token 放在 URL 的 query 字符串中来传递。这两种方法都需要手动操作，而且极易出错\ncookie的出现，在http请求时，浏览器会自动带上客户端的cookie，服务端自动读取就行")]),e._v(" "),t("h2",{attrs:{id:"cookie的设置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie的设置","aria-hidden":"true"}},[e._v("#")]),e._v(" cookie的设置")]),e._v(" "),t("p",[e._v("服务端")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("// codeblock 服务端cookie设置\nSet-Cookie: name=value[; expires=date][; domain=domain][; path=path][; secure][; HttpOnly]\n")])])]),t("p",[e._v("浏览器")]),e._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// 浏览器cookie设置 lang:JavaScript")]),e._v("\ndocument"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("cookie "),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[e._v('"name=value[; expires=date][; domain=domain][; path=path][; secure]"')]),e._v("\n")])])]),t("ul",[t("li",[t("strong",[e._v("expires")]),e._v(" 不设置为立马过期")]),e._v(" "),t("li",[t("strong",[e._v("domain")]),e._v(" 默认是当前域名")]),e._v(" "),t("li",[t("strong",[e._v("path")]),e._v(' 默认是"/"')]),e._v(" "),t("li",[t("strong",[e._v("secure")]),e._v(" 只允许https获取")]),e._v(" "),t("li",[t("strong",[e._v("HttpOnly")]),e._v(" 只允许服务端设置，如果设置后，客户端不能通过js来获取")])]),e._v(" "),t("h2",{attrs:{id:"cookie的更新"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie的更新","aria-hidden":"true"}},[e._v("#")]),e._v(" cookie的更新")]),e._v(" "),t("p",[e._v("coookie的"),t("strong",[e._v("name")]),e._v("，"),t("strong",[e._v("domain")]),e._v("，"),t("strong",[e._v("path")]),e._v("任何一个不同，都会是一个新的cookie，因此更新一个cookie的时候这三个字段必须一致，换句话说，只是更新value和expires")]),e._v(" "),t("h2",{attrs:{id:"cookie的顺序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie的顺序","aria-hidden":"true"}},[e._v("#")]),e._v(" cookie的顺序")]),e._v(" "),t("p",[e._v("对于相同的cookie,在这个消息头中存在了两个名为 “name” 的 cookie，path 值越详细则 cookie 越靠前\n按照 domain-path-secure 的顺序，设置越详细的 cookie 在字符串中越靠前")]),e._v(" "),t("h2",{attrs:{id:"cookie的有效期"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie的有效期","aria-hidden":"true"}},[e._v("#")]),e._v(" cookie的有效期")]),e._v(" "),t("p",[e._v("cookie的有效期是以客户端的时间为依据的，若以服务端的时间为准，请注意客服端和服务端的时间之差\n失效的cookie，会被删除，且不会被服务端获取")]),e._v(" "),t("h2",{attrs:{id:"cookie的作用域"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#cookie的作用域","aria-hidden":"true"}},[e._v("#")]),e._v(" cookie的作用域")]),e._v(" "),t("p",[e._v("作用域的参考有两个标准: "),t("strong",[e._v("domain")]),e._v("和"),t("strong",[e._v("path")]),e._v("\n浏览器会把 "),t("strong",[e._v("domain")]),e._v("和"),t("strong",[e._v("path")]),e._v(" 的值与请求的域名和路径做一个尾部比较（即从字符串的尾部开始比较），并将匹配的 cookie 发送至服务器。\nexample：\ndomain为/abc.com的cookie会匹配: /abc.com, /**abc.com")]),e._v(" "),t("h2",{attrs:{id:"服务端读取cookie"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务端读取cookie","aria-hidden":"true"}},[e._v("#")]),e._v(" 服务端读取cookie")]),e._v(" "),t("ul",[t("li",[e._v("不匹配的cookie不会被服务端获取")]),e._v(" "),t("li",[e._v("跨域不能读取和设置cookie")]),e._v(" "),t("li",[e._v("代理的情况需要保证cookie共享才能访问")]),e._v(" "),t("li",[e._v("客户端设置的cookie匹配成功也会被服务端读取，如果有些客户端设置的信息不希望服务端读取，或者对服务端无用，尽量不要发送，减少http请求头的内容，可以通过这是cookie的path来过滤")])]),e._v(" "),t("blockquote",[t("p",[e._v("注意cookie的大小是有限制的，而且也是不安全的，请不要把隐私信息放在cookie中")])])])}],!1,null,null,null);o.default=i.exports}}]);