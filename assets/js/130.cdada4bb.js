(window.webpackJsonp=window.webpackJsonp||[]).push([[130],{187:function(a,t,s){"use strict";s.r(t);var e=s(0),n=Object(e.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("div",{staticClass:"content"},[s("h1",{attrs:{id:"私有npm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#私有npm","aria-hidden":"true"}},[a._v("#")]),a._v(" 私有npm")]),a._v(" "),s("h2",{attrs:{id:"使用verdaccio搭建私有npm仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用verdaccio搭建私有npm仓库","aria-hidden":"true"}},[a._v("#")]),a._v(" 使用verdaccio搭建私有npm仓库")]),a._v(" "),s("ol",[s("li",[a._v("安装verdaccio")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("npm install -g verdaccio\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[a._v("配置\n和verdaccio配置有关的文件主要有以下三个：")])]),a._v(" "),s("ul",[s("li",[a._v("config.yaml 配置文件")]),a._v(" "),s("li",[a._v("storage  仓库存储位置")]),a._v(" "),s("li",[a._v("htpasswd 用户和密码管理")])]),a._v(" "),s("ol",{attrs:{start:"3"}},[s("li",[a._v("启动")])]),a._v(" "),s("p",[a._v("可以直接使用 "),s("strong",[a._v("verdaccio")]),a._v(" 命令启动，也可是使用"),s("strong",[a._v("pm2")]),a._v("守护verdaccio进程")]),a._v(" "),s("h3",{attrs:{id:"verdaccio配置说明"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#verdaccio配置说明","aria-hidden":"true"}},[a._v("#")]),a._v(" verdaccio配置说明")]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("# 仓库保存的地址，publish发布时仓库保存的地址\nstorage: ./storage\n\n# 验证\nauth:\n# 账号密码的文件地址，初始化时不存在，可指定需要手工创建\nhtpasswd:\n   file: ./htpasswd\n\n# max_users：默认1000，为允许用户注册的数量。 \n# 为-1时，不允许用户通过npm adduser注册。 \n# 但是，可以通过直接编写htpasswd file内容的方式添加用户\n# 语法：用户名:{SHA}哈希加密的字符=:autocreated 时间\n# 加密算法：SHA1哈稀之后再转换成 Base64 输出就好\n# 用户名加密码的base64 encode的转换地址：http://www.htaccesstools.com/htpasswd-generator/\nmax_users: 1000\n\n# 配置上游的npm服务器，主要用于请求的仓库不存在时到上游服务器去拉取，在国内，一般配置淘宝镜像\nuplinks:\nnpmjs:\n   url: http://registry.npmjs.org/\n#   url: http://registry.taobao.npmjs.org/\n\n# packages: 配置模块。access访问下载权限,publish包的发布权限\n# 格式如下： \n# scope: \n# 权限：操作 \n# scope:两种模式 \n# 一种是 @/ 表示某下属的某项目\n# 另一种是 * 匹配项目名称(名称在package.json中有定义)\n# 权限： \n# l access: 表示哪一类用户可以对匹配的项目进行安装(install)\n# l publish: 表示哪一类用户可以对匹配的项目进行发布(publish)\n# l proxy: 如其名，这里的值是对应于 uplinks 的名称，如果本地不存在，允许去对应的uplinks去取。\n# 操作：\n# l $all 表示所有人(已注册、未注册)都可以执行对应的操作\n# l $authenticated 表示只有通过验证的人(已注册)可以执行对应操作，注意，任何人都可以去注册账户。\n# l $anonymous 表示只有匿名者可以进行对应操作（通常无用）\npackages:\n'@*/*':\n   access: $all\n   publish: $authenticated\n'*':\n   access: $all\n   publish: $authenticated\n   proxy: npmjs\n\n# 日志打印\nlogs:\n- {type: stdout, format: pretty, level: http}\n\n# 端口监听\nlisten: 0.0.0.0:4873\n")])])]),s("h2",{attrs:{id:"使用verdaccio的docker镜像搭建私有npm仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用verdaccio的docker镜像搭建私有npm仓库","aria-hidden":"true"}},[a._v("#")]),a._v(" 使用verdaccio的docker镜像搭建私有npm仓库")]),a._v(" "),s("ol",[s("li",[a._v("拉取verdaccio的docker镜像")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker pull verdaccio/verdaccio\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[a._v("启动镜像，并配置持久化")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("docker run -itd --rm -v verdaccio-data:/verdaccio -p 4873:4873 --name verdaccio --restart=always verdaccio/verdaccio\n")])])]),s("blockquote",[s("p",[a._v("注意添加持久化，防止数据的丢失")])]),a._v(" "),s("h2",{attrs:{id:"私有仓库的使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#私有仓库的使用","aria-hidden":"true"}},[a._v("#")]),a._v(" 私有仓库的使用")]),a._v(" "),s("h3",{attrs:{id:"添加私有仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#添加私有仓库","aria-hidden":"true"}},[a._v("#")]),a._v(" 添加私有仓库")]),a._v(" "),s("ol",[s("li",[a._v("使用npm")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("npm set registry http://*.*.*.*:4873\n")])])]),s("p",[a._v("使用npm的方式，每次都需要指明registry，推荐使用nrm的方式")]),a._v(" "),s("ol",{attrs:{start:"2"}},[s("li",[a._v("使用nrm（推荐）\n​")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("npm install nrm -g\n\nnrm add mynpm http://*.*.*.*:4873  ## mynpm为自定义的仓库名称\n​\nnrm use mynpm\n")])])]),s("h3",{attrs:{id:"使用私有仓库"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用私有仓库","aria-hidden":"true"}},[a._v("#")]),a._v(" 使用私有仓库")]),a._v(" "),s("ol",[s("li",[a._v("登录")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("npm login\n")])])]),s("ol",{attrs:{start:"2"}},[s("li",[a._v("拉取")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("npm install 模块名称\n")])])]),s("ol",{attrs:{start:"3"}},[s("li",[a._v("发布")])]),a._v(" "),s("div",{staticClass:"language- extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[a._v("npm init  ## 初始化 一个目录\n\n## coding  ## 写模块\n\nnpm publish ## 发布\n")])])]),s("p",[a._v("​\n参考链接：\nhttps://www.colabug.com/2731929.html")])])}],!1,null,null,null);t.default=n.exports}}]);